<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openMHA Manual: MHAFilter::blockprocessing_polyphase_resampling_t Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openMHA Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00102.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="a00636.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MHAFilter::blockprocessing_polyphase_resampling_t Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class that does polyphase resampling and takes into account block processing.  
 <a href="a00102.html#details">More...</a></p>

<p><code>#include &lt;mha_filter.hh&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acf1161c50b1d863aa8d76c331e9bad1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#acf1161c50b1d863aa8d76c331e9bad1d">blockprocessing_polyphase_resampling_t</a> (float source_srate, unsigned source_fragsize, float target_srate, unsigned target_fragsize, float nyquist_ratio, float irslen, unsigned nchannels, <a class="el" href="a00371.html">bool</a> add_delay)</td></tr>
<tr class="memdesc:acf1161c50b1d863aa8d76c331e9bad1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contructs a polyphase resampling filter that can be used for blockprocessing with the given parameters.  <a href="#acf1161c50b1d863aa8d76c331e9bad1d">More...</a><br /></td></tr>
<tr class="separator:acf1161c50b1d863aa8d76c331e9bad1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f57c56404bfe038d89b0ad43575a3d5"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#a3f57c56404bfe038d89b0ad43575a3d5">~blockprocessing_polyphase_resampling_t</a> ()</td></tr>
<tr class="separator:a3f57c56404bfe038d89b0ad43575a3d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680b13167f2ccfba4939dcf250f47a62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#a680b13167f2ccfba4939dcf250f47a62">write</a> (<a class="el" href="a00091.html">mha_wave_t</a> &amp;signal)</td></tr>
<tr class="memdesc:a680b13167f2ccfba4939dcf250f47a62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write signal to the ringbuffer.  <a href="#a680b13167f2ccfba4939dcf250f47a62">More...</a><br /></td></tr>
<tr class="separator:a680b13167f2ccfba4939dcf250f47a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb0c2980299a082b2840a13093a24f7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#afb0c2980299a082b2840a13093a24f7d">read</a> (<a class="el" href="a00091.html">mha_wave_t</a> &amp;signal)</td></tr>
<tr class="memdesc:afb0c2980299a082b2840a13093a24f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read resampled signal.  <a href="#afb0c2980299a082b2840a13093a24f7d">More...</a><br /></td></tr>
<tr class="separator:afb0c2980299a082b2840a13093a24f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae37b09ff1468355b1478fcf794365ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00371.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#aae37b09ff1468355b1478fcf794365ff">can_read</a> () const </td></tr>
<tr class="memdesc:aae37b09ff1468355b1478fcf794365ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the resampling ring buffer can produce another output signal block.  <a href="#aae37b09ff1468355b1478fcf794365ff">More...</a><br /></td></tr>
<tr class="separator:aae37b09ff1468355b1478fcf794365ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad27c49de58d1de7e2d8e0f8a4d3068d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00118.html">polyphase_resampling_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#ad27c49de58d1de7e2d8e0f8a4d3068d3">resampling</a></td></tr>
<tr class="separator:ad27c49de58d1de7e2d8e0f8a4d3068d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ced1daabda221b95957bc987605f27f"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#a3ced1daabda221b95957bc987605f27f">fragsize_in</a></td></tr>
<tr class="separator:a3ced1daabda221b95957bc987605f27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a910a6a2e2f04fbc1889530faad3e7e74"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#a910a6a2e2f04fbc1889530faad3e7e74">fragsize_out</a></td></tr>
<tr class="separator:a910a6a2e2f04fbc1889530faad3e7e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd18b1ea0206f186ab7af0beb6ae7aa"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00102.html#aebd18b1ea0206f186ab7af0beb6ae7aa">num_channels</a></td></tr>
<tr class="separator:aebd18b1ea0206f186ab7af0beb6ae7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class that does polyphase resampling and takes into account block processing. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acf1161c50b1d863aa8d76c331e9bad1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MHAFilter::blockprocessing_polyphase_resampling_t::blockprocessing_polyphase_resampling_t </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>source_srate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>source_fragsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>target_srate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>target_fragsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>nyquist_ratio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>irslen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>nchannels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00371.html">bool</a>&#160;</td>
          <td class="paramname"><em>add_delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contructs a polyphase resampling filter that can be used for blockprocessing with the given parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source_srate</td><td>Source sampling rate / Hz </td></tr>
    <tr><td class="paramname">source_fragsize</td><td>Fragment size of incoming audio blocks / frames at source_srate </td></tr>
    <tr><td class="paramname">target_srate</td><td>Target sampling rate / Hz </td></tr>
    <tr><td class="paramname">target_fragsize</td><td>Fragment size of produced audio blocks / frames at target_srate </td></tr>
    <tr><td class="paramname">nyquist_ratio</td><td>Low pass filter cutoff frequency relative to the nyquist frequency of the smaller of the two sampling rates. Example values: 0.8, 0.9 </td></tr>
    <tr><td class="paramname">irslen</td><td>Impulse response length used for low pass filtering / s </td></tr>
    <tr><td class="paramname">nchannels</td><td>Number of audio channels </td></tr>
    <tr><td class="paramname">add_delay</td><td>To avoid underruns, a delay is generally necessary for round trip block size adaptations. It is only necessary to add this delay to one of the two resampling chains. Set this parameter to true for the first resampling object of a round trip pair. It will add the necessary delay, and calculate the size of the ring buffer appropriately, When set to false, only the ringbuffer size will be set sufficiently. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="a00325.html#aa8d800a4821d903dfd6c5485831e6a12">MHAFilter::gcd()</a>, <a class="el" href="a00348.html#ga64c16579b0d547d833d00b644821f9d4">MHASignal::max()</a>, <a class="el" href="a00102.html#ad27c49de58d1de7e2d8e0f8a4d3068d3">resampling</a>, <a class="el" href="a00325.html#a0699bc7465fbab9352e5a2717e901db2">MHAFilter::resampling_factors()</a>, <a class="el" href="a00118.html#a691ac60d549b3010a4a5489540da0562">MHAFilter::polyphase_resampling_t::write()</a>, and <a class="el" href="a00102.html#a680b13167f2ccfba4939dcf250f47a62">write()</a>.</p>

<p>Referenced by <a class="el" href="a00118.html#ac4178236440f7fb885e5543c99452c03">MHAFilter::polyphase_resampling_t::read()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f57c56404bfe038d89b0ad43575a3d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual MHAFilter::blockprocessing_polyphase_resampling_t::~blockprocessing_polyphase_resampling_t </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a680b13167f2ccfba4939dcf250f47a62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MHAFilter::blockprocessing_polyphase_resampling_t::write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00091.html">mha_wave_t</a> &amp;&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write signal to the ringbuffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal</td><td>input signal in original sampling rate </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="a00068.html" title="Error reporting exception class. ">MHA_Error</a></td><td>Raises exception if there is not enough room, if the number of channels does not match, or if the number of frames is not equal to the number specified in the constructor </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="a00102.html#a3ced1daabda221b95957bc987605f27f">fragsize_in</a>, <a class="el" href="a00091.html#aff6ef03fb3b1472b0d2a5a3a6acf008d">mha_wave_t::num_frames</a>, <a class="el" href="a00102.html#afb0c2980299a082b2840a13093a24f7d">read()</a>, <a class="el" href="a00102.html#ad27c49de58d1de7e2d8e0f8a4d3068d3">resampling</a>, and <a class="el" href="a00118.html#a691ac60d549b3010a4a5489540da0562">MHAFilter::polyphase_resampling_t::write()</a>.</p>

<p>Referenced by <a class="el" href="a00102.html#acf1161c50b1d863aa8d76c331e9bad1d">blockprocessing_polyphase_resampling_t()</a>.</p>

</div>
</div>
<a class="anchor" id="afb0c2980299a082b2840a13093a24f7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MHAFilter::blockprocessing_polyphase_resampling_t::read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00091.html">mha_wave_t</a> &amp;&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read resampled signal. </p>
<p>Will perform the resampling and remove no longer needed samples from the input buffer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signal</td><td>buffer to write the resampled signal to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="a00068.html" title="Error reporting exception class. ">MHA_Error</a></td><td>Raises exception if there is not enough input signal, if the number of channels of frames does not match. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="a00102.html#a910a6a2e2f04fbc1889530faad3e7e74">fragsize_out</a>, <a class="el" href="a00091.html#a4c6af986ff347444531cbe21ff1a698f">mha_wave_t::num_channels</a>, <a class="el" href="a00102.html#aebd18b1ea0206f186ab7af0beb6ae7aa">num_channels</a>, <a class="el" href="a00091.html#aff6ef03fb3b1472b0d2a5a3a6acf008d">mha_wave_t::num_frames</a>, <a class="el" href="a00118.html#ac4178236440f7fb885e5543c99452c03">MHAFilter::polyphase_resampling_t::read()</a>, and <a class="el" href="a00102.html#ad27c49de58d1de7e2d8e0f8a4d3068d3">resampling</a>.</p>

<p>Referenced by <a class="el" href="a00102.html#a680b13167f2ccfba4939dcf250f47a62">write()</a>.</p>

</div>
</div>
<a class="anchor" id="aae37b09ff1468355b1478fcf794365ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00371.html">bool</a> MHAFilter::blockprocessing_polyphase_resampling_t::can_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the resampling ring buffer can produce another output signal block. </p>

<p>References <a class="el" href="a00118.html#ac38091f61cb80e586f5b9ccfee90e413">MHAFilter::polyphase_resampling_t::readable_frames()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad27c49de58d1de7e2d8e0f8a4d3068d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00118.html">polyphase_resampling_t</a>* MHAFilter::blockprocessing_polyphase_resampling_t::resampling</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="a00102.html#acf1161c50b1d863aa8d76c331e9bad1d">blockprocessing_polyphase_resampling_t()</a>, <a class="el" href="a00102.html#afb0c2980299a082b2840a13093a24f7d">read()</a>, and <a class="el" href="a00102.html#a680b13167f2ccfba4939dcf250f47a62">write()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ced1daabda221b95957bc987605f27f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned MHAFilter::blockprocessing_polyphase_resampling_t::fragsize_in</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="a00102.html#a680b13167f2ccfba4939dcf250f47a62">write()</a>.</p>

</div>
</div>
<a class="anchor" id="a910a6a2e2f04fbc1889530faad3e7e74"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned MHAFilter::blockprocessing_polyphase_resampling_t::fragsize_out</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="a00102.html#afb0c2980299a082b2840a13093a24f7d">read()</a>.</p>

</div>
</div>
<a class="anchor" id="aebd18b1ea0206f186ab7af0beb6ae7aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned MHAFilter::blockprocessing_polyphase_resampling_t::num_channels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="a00102.html#afb0c2980299a082b2840a13093a24f7d">read()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="a00267.html">mha_filter.hh</a></li>
<li><a class="el" href="a00266.html">mha_filter.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00325.html">MHAFilter</a></li><li class="navelem"><a class="el" href="a00102.html">blockprocessing_polyphase_resampling_t</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
